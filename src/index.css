@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;
    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;
    --primary: 221.2 83.2% 53.3%;
    --primary-foreground: 210 40% 98%;
    --secondary: 210 40% 96%;
    --secondary-foreground: 222.2 84% 4.9%;
    --muted: 210 40% 96%;
    --muted-foreground: 215.4 16.3% 46.9%;
    --accent: 210 40% 96%;
    --accent-foreground: 222.2 84% 4.9%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;
    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 221.2 83.2% 53.3%;
    --radius: 0.5rem;
  }

  .dark {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;
    --card: 222.2 84% 4.9%;
    --card-foreground: 210 40% 98%;
    --popover: 222.2 84% 4.9%;
    --popover-foreground: 210 40% 98%;
    --primary: 217.2 91.2% 59.8%;
    --primary-foreground: 222.2 84% 4.9%;
    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;
    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;
    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;
    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 224.3 76.3% 94.1%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}

/* SAVI design tokens and utilities (moved from inline) */
:root {
  --savi-brand: 217 85% 34%;
  --savi-text: 0 0% 10%;
  --savi-surface: 0 0% 100%;
  --savi-success: 142 72% 37%; /* approx #16A34A */
  --savi-warning: 35 88% 38%; /* approx #B45309 */
  --savi-border: 214.3 31.8% 91.4%;
}

.savi-surface { background: hsl(var(--savi-surface)); color: hsl(var(--savi-text)); }
.savi-brand { color: hsl(var(--savi-brand)); }
.savi-button-primary { background: hsl(var(--savi-brand)); color: white; }
.savi-button-primary:focus-visible { outline: 2px solid #104E8B; outline-offset: 2px; }
.savi-chip { border: 1px solid hsl(var(--savi-border)); border-radius: 999px; padding: 6px 10px; }
.savi-chat-bubble-savi { background: #F3F7FF; border: 1px solid #DFE9FF; }
.savi-chat-bubble-user { background: #F9FAFB; border: 1px solid #E5E7EB; }
.savi-success { color: hsl(var(--savi-success)); }
.savi-warning { color: hsl(var(--savi-warning)); }
.savi-mono { font-variant-numeric: tabular-nums; font-feature-settings: "tnum" 1; }
.savi-text-strong { color: #101010; }

/* Animations */
@keyframes spinSlow { from { transform: rotate(0deg);} to { transform: rotate(360deg);} }
.savi-spin { animation: spinSlow 1.2s linear infinite; }
@keyframes pulseRing { 0%{ box-shadow: 0 0 0 0 rgba(13,71,161,.3);} 70%{ box-shadow: 0 0 0 12px rgba(13,71,161,0);} 100%{ box-shadow: 0 0 0 0 rgba(13,71,161,0);} }
.pulse { animation: pulseRing 1.2s ease-out infinite; }

/* Accessibility */
.quick-reply:focus-visible { outline: 2px solid hsl(var(--savi-brand)); outline-offset: 2px; }

/* Confirmation screen */
.savi-confirm-header { display:flex; align-items:center; gap:12px; }
.savi-confirm-amount { font-size: 28px; font-weight: 800; }
.savi-kv { display:grid; grid-template-columns: 160px 1fr; row-gap: 6px; column-gap: 12px; }

/* Success overlay (pantalla verde) */
@keyframes overlayIn { from { opacity: 0; transform: scale(.98);} to { opacity: 1; transform: scale(1);} }
.success-overlay { position: fixed; inset: 0; background: rgba(22,163,74,.96); color: #fff; display:flex; align-items:center; justify-content:center; z-index: 50; animation: overlayIn .2s ease-out; }
.success-wrap { text-align:center; padding: 24px; }
.success-title { font-size: 28px; font-weight: 800; }
.success-sub { opacity: .95; margin-top: 6px; }

/* Demo layout */
.demo-wrapper { max-width: 1200px; margin: 0 auto; padding: 24px; }
.app-shell { display:grid; grid-template-columns: 340px 1fr; gap: 24px; }
.chat-shell { height: 640px; display:flex; flex-direction: column; }
.chat-scroll { flex:1; border: 1px solid hsl(var(--savi-border)); border-radius: 16px; padding: 12px; }
.chat-input { display:flex; gap: 8px; margin-top: 12px; }

@media (max-width: 980px) { .app-shell { grid-template-columns: 1fr; } }

/* Map Tailwind variables to SAVI tokens */
@layer base {
  :root {
    --primary: var(--savi-brand);
    --ring: var(--savi-brand);
  }
}
